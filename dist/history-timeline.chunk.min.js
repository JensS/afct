"use strict";(self.webpackChunkafct=self.webpackChunkafct||[]).push([[775],{123(t,a,e){e.d(a,{default:()=>s});var r=e(439),n=e(796),o=e(880);function i(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,a){if(t){if("string"==typeof t)return l(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,a):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}function s(t){var a,e,l,s=800,c=600,d=1e3,u=2025,p=[],f=null,v={};function g(){return f||(f=p.filter(function(t){return t.title&&t.paragraph})),f}function y(){e=r.bAh().center([20,20]).scale(s/3).translate([s/2,c/2]),a=function(){console.log("Initializing map...");var t=r.Ltv("#map-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 ".concat(s," ").concat(c));console.log("SVG created:",t.node());var o=t.append("defs"),i=o.append("radialGradient").attr("id","mapFadeGradient").attr("cx","50%").attr("cy","50%").attr("r","50%");i.append("stop").attr("offset","0%").attr("stop-color","white").attr("stop-opacity",1),i.append("stop").attr("offset","60%").attr("stop-color","white").attr("stop-opacity",1),i.append("stop").attr("offset","100%").attr("stop-color","white").attr("stop-opacity",0),o.append("mask").attr("id","mapFadeMask").append("rect").attr("x",0).attr("y",0).attr("width",s).attr("height",c).attr("fill","url(#mapFadeGradient)"),o.append("pattern").attr("id","countryPattern").attr("patternUnits","userSpaceOnUse").attr("width",4).attr("height",4).append("circle").attr("cx",2).attr("cy",2).attr("r",.5).attr("fill","var(--text)"),o.append("pattern").attr("id","southAfricaPattern").attr("patternUnits","userSpaceOnUse").attr("width",3).attr("height",3).append("circle").attr("cx",1.5).attr("cy",1.5).attr("r",.6).attr("fill","var(--text)"),console.log("Loading map data from:",afctSettings.templateUrl+"/js/countries-50m.json"),a=t;var l=t.append("g").attr("id","countries-layer").attr("mask","url(#mapFadeMask)");return function(){a.append("g").attr("id","migration-layer"),a.append("g").attr("id","language-layer"),a.append("g").attr("id","event-layer")}(),r.Pq9(afctSettings.templateUrl+"/js/countries-50m.json").then(function(t){console.log("Map data loaded successfully:",t);var a=r.zFW().projection(e),o=l.selectAll("path").data(n.A(t,t.objects.countries).features).enter().append("path").attr("d",a).attr("fill","var(--red)").attr("stroke","var(--background)").attr("stroke-width",2).attr("class",function(t){return"country country-"+t.id}).attr("opacity",function(t){return 710===t.id?.8:.4});console.log("Countries rendered:",o.size(),"paths")}).catch(function(t){return console.error("Error loading map:",t)}),t}();try{l=o.os.timeline({paused:!0,onUpdate:x,onComplete:x,onReverseComplete:x})}catch(t){return void console.error("Error initializing GSAP timeline:",t)}var f,y,w,k;y=t("#timeline-content"),w=t(".timeline-markers"),k=g(),function(t){t.empty().html('\n            <div class="timeline-band-container">\n                <div class="timeline-fade left"></div>\n                <div class="timeline-band"></div>\n                <div class="timeline-fade right"></div>\n                <div class="timeline-center-indicator"></div>\n            </div>\n        ');var a=t.find(".timeline-band"),e=function(){var t=g(),a=new Set;t.forEach(function(t){a.add(t.year_start),t.year_end&&t.year_end!==t.year_start&&a.add(t.year_end)}),p.filter(function(t){return"map"===t.visualisation}).forEach(function(t){a.add(t.year_start),t.year_end&&t.year_end!==t.year_start&&a.add(t.year_end)});for(var e=100*Math.floor(d/100),r=100*Math.ceil(u/100),n=e;n<=r;n+=100)a.add(n);for(var o=1900;o<=r;o+=10)a.add(o);for(var i=1950;i<=r;i+=1)a.add(i);return Array.from(a).sort(function(t,a){return t-a})}();!function(t,a){var e=3e3,r=new Set(g().map(function(t){return t.year_start}));a.sort(function(t,a){return t-a}),a.forEach(function(a){var n;n=a<1900?(a-d)/(1900-d)*(.5*e):a<1950?.5*e+(a-1900)/50*(.2*e):.7*e+(a-1950)/(u-1950)*(.3*e);var o="timeline-marker",i="";a%100==0?(o+=" century-marker",i=a.toString()):a%10==0&&a>=1900?(o+=" decade-marker",a%50==0&&(i=a.toString())):a>=1950&&(o+=" year-marker",a%5==0&&(i=a.toString())),r.has(a)&&(o+=" chapter-marker",i=""),t.append('\n                <div class="'.concat(o,'" data-year="').concat(a,'" style="left: ').concat(n,'px;">\n                    ').concat(i?'<span class="marker-year">'.concat(i,"</span>"):"","\n                </div>\n            "))})}(a,e)}(w),function(a,e){a.find(".timeline-item").remove(),e.forEach(function(e){var r,n;if(null!=e&&e.id&&e.year_start){var o=e.title||(null===(r=e.history_paragraph)||void 0===r?void 0:r.title)||"",i=e.paragraph||(null===(n=e.history_paragraph)||void 0===n?void 0:n.paragraph)||"";if(o){var l=t('\n                <div class="timeline-item" data-id="'.concat(e.id,'" data-year-start="').concat(e.year_start,'" style="display: none; visibility: hidden; opacity: 0;">\n                    <div class="content-wrapper">\n                        <div class="year">\n                            ').concat(e.year_start).concat(e.year_end&&e.year_end!==e.year_start?" - ".concat(e.year_end):"","\n                        </div>\n                        <h3>").concat(o,"</h3>\n                        <p>").concat(i,"</p>\n                    </div>\n                </div>\n            "));a.append(l)}}})}(y,k),(f=t("#the-history .history-nav-arrows")).length?(f.empty(),f.append('<button class="carousel-arrow prev" aria-label="Previous History Entry"></button>'),f.append('<button class="carousel-arrow next" aria-label="Next History Entry"></button>'),t("#the-history").off("click",".carousel-arrow.prev").on("click",".carousel-arrow.prev",function(a){if(a.preventDefault(),console.log("Prev arrow clicked"),t(this).hasClass("disabled"))console.log("Prev arrow is disabled");else if(l&&l.isActive())console.log("Timeline is currently animating");else{var e=l.time(),r=Object.entries(l.labels).sort(function(t,a){return t[1]-a[1]}),n=null;console.log("Current time:",e,"Labels:",r);for(var o=r.length-1;o>=0;o--)if(r[o][1]<e-.01){n=r[o][0];break}console.log("Previous label:",n),n?(console.log("Tweening to:",n),l.tweenTo(n,{duration:.8,ease:"power2.inOut"})):console.log("No previous label found")}}),t("#the-history").off("click",".carousel-arrow.next").on("click",".carousel-arrow.next",function(a){if(a.preventDefault(),console.log("Next arrow clicked"),t(this).hasClass("disabled"))console.log("Next arrow is disabled");else if(l&&l.isActive())console.log("Timeline is currently animating");else{var e=l.time(),r=Object.entries(l.labels).sort(function(t,a){return t[1]-a[1]}),n=null;console.log("Current time:",e,"Labels:",r);for(var o=0;o<r.length;o++)if(r[o][1]>e+.01){n=r[o][0];break}console.log("Next label:",n),n?(console.log("Tweening to:",n),l.tweenTo(n,{duration:.8,ease:"power2.inOut"})):console.log("No next label found")}})):console.error(".history-nav-arrows container not found"),t(document).off("click",".timeline-marker").on("click",".timeline-marker",function(){if(!l||!l.isActive()){var a=parseInt(t(this).data("year")),e=g().find(function(t){return t.year_start===a});if(e){var r="entry_".concat(e.id);console.log("Marker click: Tweening to ".concat(r)),l.tweenTo(r,{duration:1.5,ease:"power1.inOut",overwrite:!0})}else console.log("No paragraph item found for year ".concat(a,", centering marker.")),h(a)}}),function(){var r=g();if(!r||0===r.length)return void console.error("Cannot build timeline: No paragraph items.");l.clear(),v={},r.forEach(function(t){if(function(t){return t.visualizations&&Array.isArray(t.visualizations)&&t.visualizations.length>0}(t)){var r=function(t){if(console.log("renderVisualizationsForItem called for item:",t.id,"visualizations:",t.visualizations),!t.visualizations||!Array.isArray(t.visualizations)||0===t.visualizations.length)return console.log("No visualizations for item:",t.id,"- skipping visual indicators"),{elements:[],pulseElements:[]};console.log("Rendering",t.visualizations.length,"visualizations for item:",t.id);var r=t.visualizations||[],n=[],o=[];return r.forEach(function(t,l){console.log("Processing visualization ".concat(l+1,"/").concat(r.length,":"),t);var s={};switch(t.type){case"arrow":case"arrows":console.log("Creating arrow visualization"),Array.isArray(t.arrows)?t.arrows.forEach(function(t){s=b(t),Object.values(s).forEach(function(t){t&&n.push(t)})}):(s=b(t),Object.values(s).forEach(function(t){t&&n.push(t)})),console.log("Arrow elements created:",s);break;case"dot":console.log("Creating dot visualization"),s=function(t){if(!t.origin)return console.warn("Dot visualization missing origin:",t),{dot:null,label:null};var r=a.select("#event-layer"),n=e(t.origin);console.log("Creating dot at",t.origin,"position:",n);var o=r.append("circle").attr("class","event-marker").attr("cx",n[0]).attr("cy",n[1]).attr("r",12).attr("fill","var(--viz-color)").attr("opacity",0).attr("data-x",t.origin[0]).attr("data-y",t.origin[1]).node(),i=null;t.label&&(i=r.append("text").attr("class","event-label").attr("x",n[0]).attr("y",n[1]+28).attr("text-anchor","middle").attr("font-size","12px").attr("fill","var(--viz-color)").text(t.label).attr("opacity",0).attr("data-x",t.origin[0]).attr("data-y",t.origin[1]).attr("data-offset",28).node());var l={dot:o,label:i};return console.log("Dot elements created and returning:",l),l}(t),Object.values(s).forEach(function(t){t&&(n.push(t),"circle"===t.nodeName.toLowerCase()&&o.push(t))}),console.log("Dot elements created:",s);break;case"dots":console.log("Creating dots visualization"),s=function(t){var r,n;if(!t.origin)return console.warn("Dots visualization missing origin:",t),{centralDot:null,dots:[],labels:[],mainLabel:null};var o={centralDot:null,dots:[],labels:[],mainLabel:null},i=a.select("#language-layer"),l=e(t.origin);console.log("Creating dots at",t.origin,"position:",l);var s=i.append("circle").attr("class","language-bubble").attr("cx",l[0]).attr("cy",l[1]).attr("r",15).attr("fill","var(--viz-color)").attr("opacity",0).attr("data-x",t.origin[0]).attr("data-y",t.origin[1]).node();o.centralDot=s,null!==(r=t.dotCoordinates)&&void 0!==r&&r.length?t.dotCoordinates.forEach(function(a,r){var n;if(Array.isArray(a)&&!(a.length<2)){var l=e(a),s=i.append("circle").attr("class","language-bubble").attr("cx",l[0]).attr("cy",l[1]).attr("r",10).attr("fill","var(--viz-color)").attr("opacity",0).attr("data-x",a[0]).attr("data-y",a[1]).node();if(o.dots.push(s),null!==(n=t.labels)&&void 0!==n&&n[r]){var c=i.append("text").attr("class","language-label").attr("x",l[0]).attr("y",l[1]+24).attr("text-anchor","middle").attr("font-size","12px").attr("fill","var(--viz-color)").text(t.labels[r]).attr("opacity",0).attr("data-x",a[0]).attr("data-y",a[1]).attr("data-offset",24).node();o.labels.push(c)}}}):null!==(n=t.labels)&&void 0!==n&&n.length&&t.labels.forEach(function(a,r){var n=2*Math.PI*r/t.labels.length,s=40,c=l[0]+s*Math.cos(n),d=l[1]+s*Math.sin(n),u=e.invert([c,d]),p=i.append("circle").attr("class","language-bubble").attr("cx",c).attr("cy",d).attr("r",8).attr("fill","var(--viz-color)").attr("opacity",0).attr("data-x",u?u[0]:t.origin[0]).attr("data-y",u?u[1]:t.origin[1]).node();o.dots.push(p);var f=i.append("text").attr("class","language-label").attr("x",c).attr("y",d+24).attr("text-anchor","middle").attr("font-size","12px").attr("fill","var(--viz-color)").text(a).attr("opacity",0).attr("data-x",u?u[0]:t.origin[0]).attr("data-y",u?u[1]:t.origin[1]).attr("data-offset",24).node();o.labels.push(f)});if(t.label){var c=i.append("text").attr("class","language-label").attr("x",l[0]).attr("y",l[1]-28).attr("text-anchor","middle").attr("font-size","12px").attr("fill","var(--viz-color)").text(t.label).attr("opacity",0).attr("data-x",t.origin[0]).attr("data-y",t.origin[1]).attr("data-offset",-28).node();o.mainLabel=c}return console.log("Dots elements created and returning:",o),o}(t),s.centralDot&&(n.push(s.centralDot),o.push(s.centralDot)),n.push.apply(n,i(s.dots.filter(function(t){return t}))),o.push.apply(o,i(s.dots.filter(function(t){return t}))),n.push.apply(n,i(s.labels.filter(function(t){return t}))),s.mainLabel&&n.push(s.mainLabel),console.log("Dots elements created:",s);break;default:console.warn("Unknown visualization type:",t.type)}}),console.log("Total elements to animate:",n.length,"Pulse elements:",o.length),{elements:n,pulseElements:o}}(t);v[t.id]=r,r.elements.length>0&&o.os.set(r.elements,{opacity:0})}}),l.addLabel("welcome",0);var n=function(){var t=a.select("#event-layer");if(t.empty())return console.error("Event layer not found for welcome message"),{};t.selectAll(".welcome-title, .welcome-instructions").remove();var e=t.append("text").attr("class","welcome-title").attr("x",s/2).attr("y",c/2-20).attr("text-anchor","middle").attr("font-size","24px").attr("font-weight","bold").attr("fill","var(--red)").text("South African History Timeline").attr("opacity",0).node(),r=t.append("text").attr("class","welcome-instructions").attr("x",s/2).attr("y",c/2+20).attr("text-anchor","middle").attr("font-size","16px").attr("fill","var(--red)").text("Use the arrows to navigate").attr("opacity",0).node();return console.log("Welcome elements created:",{title:e,instructions:r}),{title:e,instructions:r}}(),d=Object.values(n).filter(function(t){return t&&1===t.nodeType});l.add(m({map_zoom:"africa"}),"welcome"),d.length>0&&l.fromTo(d,{opacity:0},{opacity:1,duration:.75,stagger:.2,ease:"power2.out"},"welcome+=0.3");l.addLabel("welcome_end","welcome+=1.5");var u=null;r.forEach(function(a,e){var r=a.id,n="entry_".concat(r),o=t('.timeline-item[data-id="'.concat(r,'"]')).get(0),i=a.year_start,s=0===e?"welcome_end+=0.3":">=0.3";if(l.addLabel(n,s),0===e&&d.length>0)l.to(d,{opacity:0,duration:.3,ease:"power1.in"},n);else if(u){var c=t('.timeline-item[data-id="'.concat(u,'"]')).get(0);c&&l.to(c,{autoAlpha:0,duration:.3,ease:"power1.in"},n);var p=v[u];p&&p.elements.length>0&&l.to(p.elements,{opacity:0,duration:.3,ease:"power1.in"},n)}l.add(m(a),n+"+=0.1"),l.call(function(){return h(i)},null,n+"+=0.1"),o&&l.fromTo(o,{autoAlpha:0,display:"block"},{autoAlpha:1,duration:.5,ease:"power2.out"},n+"+=0.4");var f=v[r];f&&f.elements.length>0&&l.fromTo(f.elements,{opacity:0},{opacity:1,duration:.5,stagger:.03,ease:"power2.out"},n+"+=0.5"),u=r}),l.addLabel("end",">=0.5"),console.log("Master Timeline Built:",l.labels)}(),l.seek("welcome_end"),l.pause(),a.select("#event-layer").selectAll(".welcome-title, .welcome-instructions").each(function(){o.os.set(this,{opacity:1})}),function(a,e){if(-1===a)return t("#the-history .carousel-arrow.prev").prop("disabled",!0),t("#the-history .carousel-arrow.next").prop("disabled",!1),t("#the-history .carousel-arrow.prev").addClass("disabled"),void t("#the-history .carousel-arrow.next").removeClass("disabled");t("#the-history .carousel-arrow.prev").prop("disabled",0===a),t("#the-history .carousel-arrow.next").prop("disabled",a>=e-1),t("#the-history .carousel-arrow.prev").toggleClass("disabled",0===a),t("#the-history .carousel-arrow.next").toggleClass("disabled",a>=e-1)}(-1,g().length),console.log("Timeline initialized with labels:",l.labels)}function h(a){var e=t('.timeline-marker[data-year="'.concat(a,'"]')),r="50%";if(t(".timeline-marker").removeClass("active"),e.length){var n=e.position().left,o=t(".timeline-band-container").width()/2;r="".concat(o-n,"px"),e.addClass("active")}else console.warn("No marker found for year:",a,"- centering might be approximate.");return r}function m(t){var n=t.map_zoom||"europe_and_africa",i={europe_and_africa:{center:[20,30],scale:s/4},africa:{center:[25,0],scale:s/2},south_africa:{center:[25,-25],scale:1.2*s},south_africa_close:{center:[25,-29],scale:2.5*s},southern_africa:{center:[25,-25],scale:.8*s},world:{center:[20,10],scale:s/6}},l=i[n]||i.europe_and_africa;return o.os.to({},{duration:1,ease:"power2.inOut",onStart:function(){this.vars.startScale=e.scale(),this.vars.startCx=e.center()[0],this.vars.startCy=e.center()[1],console.log("üó∫Ô∏è Zoom starting: [".concat(this.vars.startCx,", ").concat(this.vars.startCy,"] scale=").concat(this.vars.startScale," ‚Üí [").concat(l.center,"] scale=").concat(l.scale))},onUpdate:function(){var t=this.progress(),n=this.vars.startScale+(l.scale-this.vars.startScale)*t,o=this.vars.startCx+(l.center[0]-this.vars.startCx)*t,i=this.vars.startCy+(l.center[1]-this.vars.startCy)*t;e.scale(n).center([o,i]),a.select("#countries-layer").selectAll("path").attr("d",r.zFW().projection(e)),w()},onComplete:function(){e.scale(l.scale).center(l.center),a.select("#countries-layer").selectAll("path").attr("d",r.zFW().projection(e)),w(),console.log("   ‚úÖ Zoom complete at [".concat(l.center,"] scale=").concat(l.scale))}})}function b(t){if(!t.origin||!t.destination)return console.warn("Arrow visualization missing origin or destination:",t),{line:null,originMarker:null,destMarker:null,label:null};var r=a.select("#migration-layer"),n=e(t.origin),o=e(t.destination);console.log("Creating arrow from",t.origin,"to",t.destination,"positions:",n,o);var i=r.append("path").attr("class","migration-line").attr("d","M".concat(n[0],",").concat(n[1]," L").concat(o[0],",").concat(o[1])).attr("stroke","var(--viz-color)").attr("stroke-width",3).attr("stroke-dasharray","8, 4").attr("fill","none").attr("opacity",0).attr("data-origin-x",t.origin[0]).attr("data-origin-y",t.origin[1]).attr("data-dest-x",t.destination[0]).attr("data-dest-y",t.destination[1]).node(),l=r.append("circle").attr("class","origin-marker").attr("cx",n[0]).attr("cy",n[1]).attr("r",8).attr("fill","var(--viz-color)").attr("opacity",0).attr("data-x",t.origin[0]).attr("data-y",t.origin[1]).node(),s=r.append("circle").attr("class","destination-marker").attr("cx",o[0]).attr("cy",o[1]).attr("r",8).attr("fill","var(--viz-color)").attr("opacity",0).attr("data-x",t.destination[0]).attr("data-y",t.destination[1]).node(),c=null;t.label&&(c=r.append("text").attr("class","migration-label").attr("x",(n[0]+o[0])/2).attr("y",(n[1]+o[1])/2-15).attr("text-anchor","middle").attr("font-size","12px").attr("fill","var(--viz-color)").text(t.label).attr("opacity",0).attr("data-x",(t.origin[0]+t.destination[0])/2).attr("data-y",(t.origin[1]+t.destination[1])/2).attr("data-offset",-15).node());var d={line:i,originMarker:l,destMarker:s,label:c};return console.log("Arrow elements created and returning:",d),d}function w(){["migration-layer","language-layer","event-layer"].forEach(function(t){a.select("#".concat(t)).selectAll("*").each(function(){var t=r.Ltv(this),a=t.node().nodeName.toLowerCase(),n=t.attr("class")||"";try{var o=parseFloat(t.attr("data-x")),i=parseFloat(t.attr("data-y"));if(isNaN(o)||isNaN(i)){if("path"===a&&n.includes("migration-line")){var l=parseFloat(t.attr("data-origin-x")),s=parseFloat(t.attr("data-origin-y")),c=parseFloat(t.attr("data-dest-x")),d=parseFloat(t.attr("data-dest-y"));if(!(isNaN(l)||isNaN(s)||isNaN(c)||isNaN(d))){var u=e([l,s]),p=e([c,d]);t.attr("d","M".concat(u[0],",").concat(u[1]," L").concat(p[0],",").concat(p[1]))}}}else{var f=e([o,i]);if("circle"===a&&(n.includes("origin-marker")||n.includes("destination-marker")||n.includes("event-marker")||n.includes("language-bubble")))t.attr("cx",f[0]).attr("cy",f[1]);else if("text"===a&&(n.includes("migration-label")||n.includes("event-label")||n.includes("language-label"))){var v=parseFloat(t.attr("data-offset")||"0");t.attr("x",f[0]).attr("y",f[1]+v)}}}catch(a){console.warn("Error updating position for element:",t.node(),a)}})})}function x(){var a,e;if(l){var r=l.time(),n=l.duration(),o=l.labels,i=null!==(a=o.welcome)&&void 0!==a?a:0,s=null!==(e=o.end)&&void 0!==e?e:n,c=r<=i+.01;t("#the-history .carousel-arrow.prev").prop("disabled",c).toggleClass("disabled",c);var d=r>=s-.01;t("#the-history .carousel-arrow.next").prop("disabled",d).toggleClass("disabled",d)}}return document.getElementById("visualization-data"),t.ajax({url:afctSettings.historyDataUrl,method:"GET",cache:!1,beforeSend:function(t){var a,e=(null===(a=window.wpApiSettings)||void 0===a?void 0:a.nonce)||afctSettings.historyNonce;e&&t.setRequestHeader("X-WP-Nonce",e)},success:function(t){if(Array.isArray(t)){if(console.log("Raw history data received:",t),p=t.filter(function(t){return!(null==t||!t.year_start)&&!("paragraph"===t.visualisation&&!t.title&&!(null===(a=t.history_paragraph)||void 0===a?void 0:a.title));var a}),console.log("Filtered history data:",p),0===p.length)return console.error("No valid history items found"),void console.log("Check WordPress admin: Pages ‚Üí Edit History page ‚Üí Add history entries");f=null,y()}else console.error("Invalid history data format")},error:function(t){var a;if(403===t.status&&"rest_cookie_invalid_nonce"===(null===(a=t.responseJSON)||void 0===a?void 0:a.code))return console.warn("Nonce validation failed, attempting to refresh..."),void window.location.reload();console.error("Failed to load history data:",t),401!==t.status&&403!==t.status||console.error("Authentication error - please check if you are logged in")}}),{jumpToEntry:function(t){if(l){var a="entry_".concat(t);void 0!==l.labels[a]?l.tweenTo(a,{duration:1,ease:"power2.inOut",overwrite:!0}):console.warn("Entry with id ".concat(t," not found in timeline"))}},jumpToYear:function(t){if(l){var a=g(),e=a.find(function(a){return a.year_start===t});if(e)this.jumpToEntry(e.id);else{var r=a.reduce(function(a,e){return Math.abs(e.year_start-t)<Math.abs(a.year_start-t)?e:a});this.jumpToEntry(r.id)}}},reinitialize:function(){f=null,y()},getState:function(){if(!l)return{initialized:!1};var t=l.time(),a=l.labels,e=Object.keys(a).find(function(e,r,n){var o=n[r+1];return a[e]<=t&&(!o||a[o]>t)}),r=null;return e&&e.startsWith("entry_")&&(r=parseInt(e.replace("entry_",""))),{initialized:!0,currentTime:t,currentLabel:e,currentId:r,isAtWelcome:"welcome"===e,isAtEnd:"end"===e,isPlaying:l.isActive()}},next:function(){!l||l.isActive()||t("#the-history .carousel-arrow.next").prop("disabled")||l.play()},prev:function(){!l||l.isActive()||t("#the-history .carousel-arrow.prev").prop("disabled")||l.reverse()}}}}}]);